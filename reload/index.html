<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    
    
    <!-- google site -->
    <meta name="google-site-verification" content="BazmSJ55LY7H3RD6ttelAsE8PmOPjhkFnDdIjFMCiJE" />
    <title>neo1218ã®æ­»å®… - POST</title>
    <link rel="shortcut icon" href="http://7xj431.com1.z0.glb.clouddn.com/cropped-150-150-688417.png" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href=/static/css/base_site.css>
    <link rel="stylesheet" type="text/css" href=/static/css/index.css>
    <link rel="stylesheet" type="text/css" href=/static/css/post.css>
    <link rel="stylesheet" type="text/css" href=/static/css/self_card.css>
    <link rel="stylesheet" type="text/css" href=/static/css/logo/github.css>
    <link rel="stylesheet" type="text/css" href=/static/css/logo/facebook.css>
    <link rel="stylesheet" type="text/css" href=/static/css/logo/twitter.css>
    <link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/pygments.css">
    <link href=/static/image/bg.png>
</head>
<body>
<header>
    <div class="top-z-container">
        <!--blur-->
        <div class="blur-top-image"></div>
        <div id="top-bar">
            <nav class="left-box">
                <ul>
                    <li>
                        <a href=/>neo1218ã®æ­»å®…</a> - Pythoner æ­»å®…åˆ°åº• ä¸æƒ³è¯´è¯ æœ¨çŠ€ä¸‡å²!
                    </li>
                </ul>
            </nav>
        </div>
    </div>
    <div id="top-image"></div>
    <nav class="nav-wrapper">
        <ul class="category-list">
            <li>
                <a href=/>
                    <span>é¦–é¡µ</span>
                    <div class="menu-icon-wrapper">
                        <span class="menu-icon icon-no-bg-color fa fa-home"></span>
                    </div>
                </a>
            </li>
            
                <li onmouseover="show_menu(this)" onmouseout="hide_menu(this)">
                    <a href=/tag/Web/>
                        <div class="menu-icon-wrapper">
                            <span class="menu-icon">7</span>
                        </div>
                        Web
                    </a>
                    <ul class="drop-down" align="center">
                        <span>Webå¼€å‘</span>
                    </ul>
                </li>
            
                <li onmouseover="show_menu(this)" onmouseout="hide_menu(this)">
                    <a href=/tag/Life/>
                        <div class="menu-icon-wrapper">
                            <span class="menu-icon">2</span>
                        </div>
                        Life
                    </a>
                    <ul class="drop-down" align="center">
                        <span>ç”Ÿæ´»éšç¬”</span>
                    </ul>
                </li>
            
                <li onmouseover="show_menu(this)" onmouseout="hide_menu(this)">
                    <a href=/tag/Python/>
                        <div class="menu-icon-wrapper">
                            <span class="menu-icon">14</span>
                        </div>
                        Python
                    </a>
                    <ul class="drop-down" align="center">
                        <span>Pythonå­¦ä¹ </span>
                    </ul>
                </li>
            
                <li onmouseover="show_menu(this)" onmouseout="hide_menu(this)">
                    <a href=/tag/Other/>
                        <div class="menu-icon-wrapper">
                            <span class="menu-icon">3</span>
                        </div>
                        Other
                    </a>
                    <ul class="drop-down" align="center">
                        <span>å…¶ä»–</span>
                    </ul>
                </li>
            
                <li onmouseover="show_menu(this)" onmouseout="hide_menu(this)">
                    <a href=/tag/DIY/>
                        <div class="menu-icon-wrapper">
                            <span class="menu-icon">4</span>
                        </div>
                        DIY
                    </a>
                    <ul class="drop-down" align="center">
                        <span>ä¸ªäººé¡¹ç›®</span>
                    </ul>
                </li>
            
                <li onmouseover="show_menu(this)" onmouseout="hide_menu(this)">
                    <a href=/tag/OS/>
                        <div class="menu-icon-wrapper">
                            <span class="menu-icon">3</span>
                        </div>
                        OS
                    </a>
                    <ul class="drop-down" align="center">
                        <span>æ“ä½œç³»ç»Ÿå­¦ä¹ </span>
                    </ul>
                </li>
            
                <li onmouseover="show_menu(this)" onmouseout="hide_menu(this)">
                    <a href=/tag/Algo/>
                        <div class="menu-icon-wrapper">
                            <span class="menu-icon">7</span>
                        </div>
                        Algo
                    </a>
                    <ul class="drop-down" align="center">
                        <span>ç®—æ³•å­¦ä¹ </span>
                    </ul>
                </li>
            
            <li>
                <a href=/about/>
                    <span>å…³äº</span>
                    <div class="menu-icon-wrapper">
                        <span class="menu-icon icon-no-bg-color fa fa-info"></span>
                    </div>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main>
    <div id="main">
        
<div class="post-body-wrapper">
    <div class="main_post">
        <h1>Why Reload?</h1>
        <h3>2016-06-19 10:31:53</h3>
        <div class="post_body">
            <h2>è®¾å®šç¼–ç çš„æƒ¯ä¾‹</h2>

<p>å½“è®¾å®špythonæ–‡ä»¶ç¼–ç æ—¶</p>

<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>

<span class="nb">reload</span><span class="p">(</span><span class="n">sys</span><span class="p">)</span>
<span class="n">sys</span><span class="o">.</span><span class="n">setdefaultencoding</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
</pre></div>

<p>ä¸‰è¡Œæå®šï¼Œå¦ˆå¦ˆå†ä¹Ÿä¸ç”¨æ‹…å¿ƒæ±‰å­—ä¹±ç äº†ï¼ğŸ˜„</p>

<h2>ç„¶è€Œï¼šé—®é¢˜æ¥äº†</h2>

<p>å‡ ä¸ªæœˆåçš„ä¸€å¤©ï¼Œä¸€åå¥³ç¨‹åºå‘˜é—®æˆ‘ï¼šä¸ºä»€ä¹ˆè¦ reload(sys) ? ğŸ˜”</p>

<h2>SO: Why reload(sys)</h2>

<h3>1. sys</h3>

<div class="codehilite"><pre><span></span>sys æ˜¯ä¸€ä¸ªpythonæ¨¡å—ï¼ŒåŒ…å«ç³»ç»Ÿå¯¹åº”çš„åŠŸèƒ½ï¼Œæ¯”å¦‚é€šè¿‡argvè·å–è¿è¡Œæ—¶å‘½ä»¤è¡Œå‚æ•°
</pre></div>

<p>å…·ä½“è§http://www.cnblogs.com/diege/archive/2012/10/03/2710776.html <br/></p>

<h3>2. setdefaultencoding å‡½æ•°</h3>

<div class="codehilite"><pre><span></span>setdefaultencoding æ˜¯sysæ¨¡å—æä¾›çš„ä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥<span class="nt">&lt;strong&gt;</span>ä¿®æ”¹é»˜è®¤ç¼–ç <span class="nt">&lt;/strong&gt;&lt;br/&gt;</span>
</pre></div>

<h3>3. python åŠ è½½æ¨¡å—çš„è¿‡ç¨‹</h3>

<div class="codehilite"><pre><span></span>è¿è¡Œè§£é‡Šå™¨ -&gt; åŠ è½½åº“æ–‡ä»¶(ex: site.py) -&gt; åŠ è½½æ¨¡å—(ex: sys)
</pre></div>

<h3>4. python reload å‡½æ•°</h3>

<div class="codehilite"><pre><span></span>reload æ˜¯pythonå†…ç½®å‡½æ•°ï¼Œç”¨äºåœ¨å½“å‰è¿è¡Œæ—¶é‡æ–°åŠ è½½æ¨¡å—ï¼Œä¸ä¼šæ”¹å˜å…ˆå‰æ–‡ä»¶ä¸­çš„æ¨¡å—çŠ¶æ€
</pre></div>

<h3>5. reload(sys)</h3>

<p>å¦‚æœæˆ‘ä»¬å°è¯•è¿è¡Œ</p>

<div class="codehilite"><pre><span></span><span class="o">&gt;&gt;</span> <span class="kn">import</span> <span class="nn">sys</span>
<span class="o">&gt;&gt;</span> <span class="n">sys</span><span class="o">.</span><span class="n">setdefaultencoding</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
<span class="ne">AttributeError</span><span class="p">:</span> <span class="s1">&#39;module&#39;</span> <span class="nb">object</span> <span class="n">has</span> <span class="n">no</span> <span class="n">attribute</span> <span class="s1">&#39;setdefaultencoding&#39;</span>
</pre></div>

<p>è¿™åˆæ˜¯æ€ä¹ˆå›äº‹å‘¢ï¼Ÿ<br/>
å½“æˆ‘ä»¬å¯¼å…¥åŠ è½½ sys æ¨¡å—æ—¶é¦–å…ˆä¼šåŠ è½½ site.py(/usr/lib/python2.7), çœ‹ä¸€ä¸‹ site.py çš„æºç ï¼š
<img alt="æºç " src="http://7xj431.com1.z0.glb.clouddn.com/å±å¹•å¿«ç…§%202015-09-08%20ä¸‹åˆ11.17.14.png" /><br/></p>

<p>åŸæ¥setdefaultencodingå‡½æ•°è¢«site.pyåˆ æ‰å•¦ï¼è‡³äºä¸ºä»€ä¹ˆè¦åˆ ï¼Œæ³¨é‡Šé‡Œå†™äº†ï¼šä½¿ç”¨æˆ·æ— æ³•åœ¨åˆå§‹åŒ–åæ”¹å˜ç¼–ç <br/>
è€Œ reload(sys) åˆ™é¿å…äº†site.pyçš„è°ƒç”¨ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ setdefaultencoding å‡½æ•°æ”¹å˜ç¼–ç <br/></p>

        </div>
    </div>
    <div id="disqus_thread" style="padding: 50px"></div>
    <script>
    /**
    * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
    */
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    
    s.src = '//neo1218flask.disqus.com/embed.js';
    
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</div>

    </div>
</main>
<footer>
    <div id="foot">
        
            <div class="footer">
                <span>
                    Powered by:
                    <a href="https://github.com/neo1218/railgun/" target="_blank">railgun</a>
                </span>
                <br>
            </div>
        
    </div>
</footer>
<!--div id="to-top">
    <a href="" onclick="scroll_to_top(0.9); return false;">
        <img src="http://7xj431.com1.z0.glb.clouddn.com/tt.gif"
            style="height: 160px; width: 160px"></img>
    </a>
</div-->
<a href="#" id="toTop" style="top: 0px;" onclick="scroll_to_top(0.9); return false;">
    <div id="toTopRope"></div>
    <img id="toTopHover" src="http://7xj431.com1.z0.glb.clouddn.com/topscroll.png"></div>
</a>
</body>
    <script src=/static/js/base_site.js> </script>
</html>