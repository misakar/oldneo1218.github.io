<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    
    
    <!-- google site -->
    <meta name="google-site-verification" content="BazmSJ55LY7H3RD6ttelAsE8PmOPjhkFnDdIjFMCiJE" />
    <title>neo1218の家 - POST</title>
    <link rel="shortcut icon" href="http://7xj431.com1.z0.glb.clouddn.com/cropped-150-150-688417.png" type="image/x-icon" />
    <link rel="stylesheet" type="text/css" href=/static/css/base_site.css>
    <link rel="stylesheet" type="text/css" href=/static/css/index.css>
    <link rel="stylesheet" type="text/css" href=/static/css/post.css>
    <link rel="stylesheet" type="text/css" href=/static/css/self_card.css>
    <link rel="stylesheet" type="text/css" href=/static/css/github.css>
    <link rel="stylesheet" type="text/css" href=/static/css/logo/github.css>
    <link rel="stylesheet" type="text/css" href=/static/css/logo/facebook.css>
    <link rel="stylesheet" type="text/css" href=/static/css/logo/twitter.css>
    <link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link href=/static/image/bg.png>
</head>
<body>
<header>
    <div class="top-z-container">
        <!--blur-->
        <div class="blur-top-image"></div>
        <div id="top-bar">
            <nav class="left-box">
                <ul>
                    <li>
                        <a href=/>neo1218の家</a> - Pythoner 死宅到底 不想说话 木犀万岁!
                    </li>
                </ul>
            </nav>
        </div>
    </div>
    <div id="top-image"></div>
    <nav class="nav-wrapper">
        <ul class="category-list">
            <li>
                <a href=/>
                    <span>首页</span>
                    <div class="menu-icon-wrapper">
                        <span class="menu-icon icon-no-bg-color fa fa-home"></span>
                    </div>
                </a>
            </li>
            
                <li onmouseover="show_menu(this)" onmouseout="hide_menu(this)">
                    <a href=/tag/Web/>
                        <div class="menu-icon-wrapper">
                            <span class="menu-icon">9</span>
                        </div>
                        Web
                    </a>
                    <ul class="drop-down" align="center">
                        <span>Web开发</span>
                    </ul>
                </li>
            
                <li onmouseover="show_menu(this)" onmouseout="hide_menu(this)">
                    <a href=/tag/Life/>
                        <div class="menu-icon-wrapper">
                            <span class="menu-icon">3</span>
                        </div>
                        Life
                    </a>
                    <ul class="drop-down" align="center">
                        <span>生活随笔</span>
                    </ul>
                </li>
            
                <li onmouseover="show_menu(this)" onmouseout="hide_menu(this)">
                    <a href=/tag/Read/>
                        <div class="menu-icon-wrapper">
                            <span class="menu-icon">1</span>
                        </div>
                        Read
                    </a>
                    <ul class="drop-down" align="center">
                        <span>读书</span>
                    </ul>
                </li>
            
                <li onmouseover="show_menu(this)" onmouseout="hide_menu(this)">
                    <a href=/tag/Python/>
                        <div class="menu-icon-wrapper">
                            <span class="menu-icon">16</span>
                        </div>
                        Python
                    </a>
                    <ul class="drop-down" align="center">
                        <span>Python学习</span>
                    </ul>
                </li>
            
                <li onmouseover="show_menu(this)" onmouseout="hide_menu(this)">
                    <a href=/tag/Other/>
                        <div class="menu-icon-wrapper">
                            <span class="menu-icon">3</span>
                        </div>
                        Other
                    </a>
                    <ul class="drop-down" align="center">
                        <span>其他</span>
                    </ul>
                </li>
            
                <li onmouseover="show_menu(this)" onmouseout="hide_menu(this)">
                    <a href=/tag/DIY/>
                        <div class="menu-icon-wrapper">
                            <span class="menu-icon">4</span>
                        </div>
                        DIY
                    </a>
                    <ul class="drop-down" align="center">
                        <span>个人项目</span>
                    </ul>
                </li>
            
                <li onmouseover="show_menu(this)" onmouseout="hide_menu(this)">
                    <a href=/tag/C%26Cpp/>
                        <div class="menu-icon-wrapper">
                            <span class="menu-icon">1</span>
                        </div>
                        C&amp;Cpp
                    </a>
                    <ul class="drop-down" align="center">
                        <span>噶哈哈</span>
                    </ul>
                </li>
            
                <li onmouseover="show_menu(this)" onmouseout="hide_menu(this)">
                    <a href=/tag/OS/>
                        <div class="menu-icon-wrapper">
                            <span class="menu-icon">5</span>
                        </div>
                        OS
                    </a>
                    <ul class="drop-down" align="center">
                        <span>操作系统学习</span>
                    </ul>
                </li>
            
                <li onmouseover="show_menu(this)" onmouseout="hide_menu(this)">
                    <a href=/tag/Algo/>
                        <div class="menu-icon-wrapper">
                            <span class="menu-icon">7</span>
                        </div>
                        Algo
                    </a>
                    <ul class="drop-down" align="center">
                        <span>算法学习</span>
                    </ul>
                </li>
            
            <li>
                <a href=/about/>
                    <span>关于</span>
                    <div class="menu-icon-wrapper">
                        <span class="menu-icon icon-no-bg-color fa fa-info"></span>
                    </div>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main>
    <div id="main">
        
<div class="post-body-wrapper">
    <div class="main_post">
        <h1>指针(努力说清楚)</h1>
        <h3>2016-11-06 20:47:18</h3>
        <div class="post_body">
            <p><img alt="" src="https://cloud.githubusercontent.com/assets/10671733/20017054/f80f9706-a2fc-11e6-9a56-72e7b73c5320.png" /></p>

<h1 id="-">努力说清楚&ndash;&gt;指针</h1>

<h2 id="1">1. 内存地址</h2>

<p>内存是用来放程序和数据的地方, 就像你家一样放你和你妈😄 ,那内存地址呢, 就是门牌号, 用来找到你家的位置.考虑到计算机基于二进制, 所以内存地址一般用16进制表示(可以很方便的基于二进制演算), 比如mbr在内存中的起始程序地址就是0x7c00(比较经典,拿来举例子,不懂就当我在装逼&hellip;下同).</p>

<h2 id="2">2. 变量</h2>

<p>变量是一个量, 是&rdquo;量&rdquo;就可以存东西, 也就拥有内存中的一块区域, 可以通过内存地址找到这个变量. 当然，变量吗, 这块内存中的东西是可以被程序改变的.</p>

<h2 id="3">3. 指针</h2>

<p>指针是一个变量, 就是这么简单. 但是相比于存放int, char, float类型的变量, 指针存放的是地址-&gt;就是那一串神奇的16进制数字. 也就是说<strong>通过指针变量中存放的地址可以找到相应的内存区域</strong>, 至于这块内存区域中放的是什么就要看初始化的时候给了什么.</p>

<h2 id="4">4. &amp;: 取地址符</h2>

<p>在C语言中, &amp;符号具有2个作用(作用多是因为操作符重载):</p>

<ol>
<li>取变量的地址</li>
<li>按位与</li>
</ol>

<p>我们这里说第一个用法: <strong>在C语言中</strong>: &amp;表示取地址, 注意C++中&rdquo;&amp;&rdquo;表示引用, 引用的概念是另一块了, 这篇先跳过. <br/></p>

<pre><code>int data = 10;
// &amp;data 就可以拿到data变量的内存地址
</code></pre>

<h2 id="5">5. 初始化指针</h2>

<pre><code>int data = 10;  // 声明并初始化一个变量data, 赋初值为10
int* point = &amp;data  // 声明并初始化一个指针变量point, point存放data的内存地址&amp;data(形象的说就是point指针指向data所在的内存区域)
// 这里的int*类型表明point是一个指针(*), 而且是指向一块存放int区域内存的指针(int)
</code></pre>

<p>如果指针声明后没有初始化, 就会变成野指针, 所谓野指针就是你不知道指针指向的是哪块内存区域(系统自动赋初值的数字会被解释为地址), 以后改变这个指针的时候就可能会破坏一些重要的内存区域.<br/><br />
当然现在CPU都是保护模式, 用户程序是访问不到重要的内存地址的(比如内核)&hellip;(好吧, 我又在装逼了&hellip;)</p>

<h2 id="6">6. *操作符</h2>

<p>之前说了<code>&amp;data</code>表示取data变量的地址, 而<code>*&amp;data</code>就相当于data, 也就是说<code>*point</code>可以用来访问data变量.</p>

<pre><code>int data2 = *point;  // 相当于 int data2 = data;
</code></pre>

<h2 id="7">7. 指针与数组</h2>

<p>数组就是内存中一块连续的区域, 很自然的, 如果我们能用指针指向数组array的起始地址start, 就可以通过</p>

<pre><code>array: 数组; start: 数组的起始内存地址; array_len: 数组的长度; type_len: 数组存放数据类型的大小

for(int i = 0; i &lt; array_len; ++i) {
    *(start + type_len*i)
}
</code></pre>

<p>拿到数组中的元素. 事实是:</p>

<pre><code>int a[5] = {1, 2, 3, 4, 5};
// 这里的a就是数组的起始地址, 也就是数组中第一个元素的地址, 即:
// a = &amp;a[0]
int* point_a = a; // int* point_a = &amp;a[0]
// 这里的point_a就是一个指向数组起始地址的指针.
</code></pre>

<p>所以可以用</p>

<pre><code>for(int i = 0; i &lt; 5; ++i) {
    *(point_a + 4*i)  // int占4个字节
}
</code></pre>

<p>访问数组中的元素.</p>

<h2 id="8">8. 指针与函数</h2>

<p>函数也在内存中, 程序通过访问函数的起始地址调用函数, 之后会进行形参实参匹配, 局部变量入栈等操作. 同理, 如果我们把函数的起始地址放到一个指针变量中, 我们就可以使用指针调用这个函数!<br/><br />
比如:</p>

<pre><code>int (*point_function)(int, int)=NULLA; // 这里的point_function就是一个函数指针
</code></pre>

<p>可以实现一个函数给函数指针赋值</p>

<pre><code>int function(int a, int b) {
    int c = a+b;
    printf("%d", &amp;c);
}

point_function = &amp;function
</code></pre>

<p>这个时候我们就可以使用point_function指针调用function函数了.</p>

<pre><code>*point_function(1, 2); // 3
</code></pre>

<h2 id="9">9. 指针的作用</h2>

<p>指针最大的特点就是可以直接控制内存区域, 高级语言或多或少的避免用户直接接触内存, 但是指针可以让程序员直接操作内存地址, 好处是灵活、方便、指哪打哪; 缺点&hellip;就是不安全, 比如我之前说的野指针.</p>

<h2 id="10">10. 总结</h2>

<p>关于指针, 当你被&rdquo;*&rdquo;, &ldquo;&amp;&rdquo;迷惑的时候, 记住下面这些:</p>

<ol>
<li>指针是一个变量, 是一个存放内存地址的变量</li>
<li>通过&amp;可以拿到一个变量的内存地址</li>
<li>通过(*内存地址)可以拿到这块内存地址存放的变量</li>
</ol>

<p>这样, 再怎么搭配, 也不怕了:) 希望如此. <br/></p>

        </div>
    </div>
    <div id="disqus_thread" style="padding: 50px"></div>
    <script>
    /**
    * RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
    * LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
    */
    /*
    var disqus_config = function () {
    this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    
    s.src = '//neo1218flask.disqus.com/embed.js';
    
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</div>

    </div>
</main>
<footer>
    <div id="foot">
        
            <div class="footer">
                <span>
                    Powered by:
                    <a href="https://github.com/neo1218/railgun/" target="_blank">railgun</a>
                    I am a loser
                </span>
                <br>
            </div>
        
    </div>
</footer>
<div id="back-to-top" data-scroll="body" style="top: -900px;">
</div>
</body>
    <script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>
    <script src=/static/js/base_site.js></script>
    <script src=/static/js/disqus/embed.js></script>
    <script src=/static/js/menufix.js></script>
    <script src=/static/js/backtotop.js></script>
    <script type="text/javascript">
        function loadMenuFix() { menufix("info_card"); }
        function loadDeadCat() { deadcat("toTop"); }
        function addLoadEvent(func) {
            var oldonload = window.onload;
            if (typeof window.onload != 'function') {
                window.onload = func;
            } else {
                window.onload = function() {
                    if (oldonload) {
                        oldonload();
                    }
                    func();
                }
            }
        }
        addLoadEvent(loadMenuFix);
        // addLoadEvent(loadDeadCat);
    </script>
</html>